# AGENT.md

This file provides guidance to AI coding agents when working with code in this repository.

## About This Project

This is the source code for jmthornton.net, a personal website built with Astro. It serves as a playground for ideas and projects, as well as explorations in new development approaches. The website includes a blog, recipes, tools, and project showcases.

## Development Commands

### Building and Development
- `make dev` - Start local Astro dev server
- `make build` - Production build (outputs to `dist/`)
- `make all` - Full build: styles, RSS feed, and Astro build
- `make feed` - Generate RSS feeds (requires Python 3 with feedgen and bs4)
- `make style` - Build CSS styles including Prism syntax highlighting
- `npm run check` - Run Astro and TypeScript type checking
- `npm run preview` - Preview the production build locally

## Architecture Overview

### Tech Stack
- **Astro 5** - Static site generator (no SSR, pure static output)
- **TypeScript** - Strict mode via Astro's tsconfig
- **Prism.js** - Vendored syntax highlighting (conditionally loaded)
- **purify-css** - CSS minification for Prism
- **Python** - RSS feed generation (`bin/feed.py`)

### Project Structure
```
src/
  components/     # reusable Astro components (Base, Nav, Footer, FontPreload)
  layouts/        # page layouts (Base, BlogPost, Recipe)
  pages/          # file-based routing
    blog/
      p/          # individual blog posts (.astro files)
      recipes/r/  # individual recipe pages
    tools/        # interactive tools (JWT decoder, URL encoder, etc.)
    projects/     # project showcase pages
public/
  assets/
    fonts/        # MetroNova and VictorMono (WOFF2)
    style/        # main.css
    images/       # site images and icons
    vendor/       # Prism.js and CSS
  lib/            # client-side JS (oneko.js)
  blog/           # blog static files (feed.xml, sitemap)
  readables/      # readable content (Orson docs)
bin/
  feed.py         # Python RSS feed generator
```

### Content Management
- Blog posts and recipes are individual `.astro` files under `src/pages/`
- Each post uses a layout component (`BlogPost` or `Recipe`) and passes metadata as props
- URL structure mirrors file paths: `src/pages/blog/p/foo.astro` becomes `/blog/p/foo`
- RSS feed is generated by a Python script that parses Astro source files

### Key Patterns
- File-based routing via Astro's `src/pages/` convention
- Layout composition: pages use layouts which use the Base component
- Footer has three variants: standard, blog, recipe
- Prism.js syntax highlighting loaded conditionally per-page via `hasPrism` prop
- Minimal client-side JS; only loaded where needed (tools, oneko)
- Font preloading strategy configurable per-layout (preload vs prefetch)
- Dark mode syntax highlighting via `prefers-color-scheme` media query
