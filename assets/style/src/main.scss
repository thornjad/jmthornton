/* Main style for jmthornton.net
 * Copyright (c) 2012-2021 Jade Michael Thornton
 */


// Variables

@import './modules/fontface';
$font-main: MetroNova;
$font-secondary: sans-serif;
$font-mono: VictorMono, monospace;

// heights, widths and things
$font-size: 16px;
$line-height: 1.4em;
$standard-margin: 1.4rem 0;
$main-width: 770px; // approx. 88ch, but without the loading flash

$border-radius: 5px;

// Colors
$mint: #2aa198;
$blue: #4B788D;
$brown: #83684C;
$gold: #fabd2f;
$green: #8ec07c;
$lighter-blue: #82aec5;
$grey1: #e4e2e2;
$grey2: #6b6b6b;

$bg: #fefbf2;
/* $bg: #fbfbfa; */
$bg-alt: #f6f3e7;
$fg: #525C5A;

$heading: $mint;
$heading-marker: $brown;
$anchor: $fg;
$anchor-hover: $blue;
$footer-line: $heading;
$button-primary-bg: $brown;
$button-primary-fg: white;
$button-primary-bg-hover: $mint;
$button-primary-fg-hover: white;
$button-secondary-bg: $mint;
$button-secondary-fg: white;
$button-secondary-bg-hover: $mint;
$button-secondary-fg-hover: white;
$button-low-key-bg: $grey2;
$button-low-key-fg: white;
$button-low-key-bg-hover: darken($button-low-key-bg, 5%);;
$button-low-key-fg-hover: white;
$hr: $grey1;
$spinner-fg: $mint;
$pre-border: $green;
$blockquote-bg: $gold;
$aside-bg: $lighter-blue;
$toggle-bg: $brown;


// Major structural elements

:root {
  font-family: $font-main;
  font-size: $font-size;
  line-height: $line-height;
  background: $bg;
}

body {
  display: flex;
  position: relative;
  flex-direction: column;
  align-items: center;
}

main {
  width: 100%;
  max-width: $main-width;
  margin: 0 1rem;
}

header {
  height: 2em;
  width: 100%;
  max-width: $main-width;
}

footer {
  position: relative;
  margin-top: 5rem;

  &::before {
	  content: '- - - - - - -';
    color: $footer-line;
	  position: absolute;
	  top: 0;
    left: 50%;
    transform: translate(-50%, -50%);
  }
}

section {
  margin: 4rem 0;
}

blockquote > figcaption {
  padding-top: 1em;
}


// Other structural elements

@import './modules/headings';

p, ul {
  margin: $standard-margin;
}

li > p:first-child {
  margin-top: 0;
}

ul, ol {
  list-style: none;
  padding: 0;

  > li {
    padding: 0.25em 0 0.25em 2ch;
    position: relative;
    margin: 0.15rem 0;
  }

  li::before {
    content: '•';
    position: absolute;
    top: 0.5ex;
    left: 0;
  }

  &.dl > li p:first-child {
    font-weight: bold;
  }
}

a {
  color: $anchor;
  text-decoration-color: $mint;

  &:hover {
    color: $anchor-hover;
  }

  &:visited {
    color: $anchor;
  }
}

div.no-md-a a {
  font-style: normal;
  &::before {content: none;}
  &::after {content: none;}
}

time {
  font-style: italic;

  &::before {
    content: '| ';
    font-style: normal;
    color: $heading-marker;
  }
}

blockquote {
  margin: 1rem;
	display: block;
	position: relative;
	font-style: italic;
  padding: 1.5rem 1.5rem 1rem 2.5rem;
	border-left: .375rem solid $blockquote-bg;
	border-radius: $border-radius;
  background: $bg-alt;

  &::before {
	  position: absolute;
	  top: 1rem;
	  left: 0;
	  font-family: sans-serif;
	  font-size: 3rem;
	  font-weight: 700;
	  content: "“";
	  color: $blockquote-bg;
  }

  &[cite]::after {
	  font-style: normal;
	  font-size: .75em;
	  font-weight: 700;
	  content: "\a—  " attr(cite);
	  white-space: pre;
  }
}

aside {
  margin: 1rem;
  display: block;
  position: relative;
  padding: 1rem 1.5rem 1rem 2.5rem;
	border-left: .375rem solid $aside-bg;
	border-radius: $border-radius;
  background: $bg-alt;
}

img {
  border-radius: $border-radius;
	max-width: 100%;
	height: auto;
}

hr {
  border: 1px solid $hr;
}

.sep-top {
  border-top: 1px solid $hr;
}


// Buttons and inputs

button {
  display: inline-block;
  padding: 10px 12px;
  min-width: 6rem;
  min-height: max-content;
  border-color: $button-primary-bg;
  background-color: $button-primary-bg;
  color: $button-primary-fg;
  border-radius: $border-radius;
  text-decoration: none;
  cursor: pointer;
  line-height: 20px;
  text-align: center;
  outline: 0;

  &:hover {
    background-color: $button-primary-bg-hover;
    color: $button-primary-fg-hover;
  }

  &.secondary {
    background-color: none;
    border: 1px solid $button-secondary-bg;
    color: $button-secondary-fg;

    &:hover {
      background-color: $button-secondary-bg-hover;
      color: $button-secondary-fg-hover;
    }
  }

  &.low-key {
    background-color: $button-low-key-bg;
    color: $button-low-key-fg;
    &:hover {
      background-color: $button-low-key-bg-hover;
      color: $button-low-key-fg-hover;
    }
  }
}

div.action-buttons {
  display: flex;
  justify-content: end;
  width: 100%;

  > button {
    margin: 0 4px;

    &:last-child {
      margin-right: 0;
    }
  }
}

label.toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;

  > span {
    padding-right: 1em;
    font-size: 0.85em;
  }

  input.toggle {
    appearance: none;
    cursor: pointer;
    user-select: none;
    background-color: $toggle-bg;
    border: 1px solid $toggle-bg;
    border-radius: $border-radius;
    height: 1.5em;
    width: 3em;
    box-shadow: -1.5em 0 0 2px $bg inset,0 0 0 2px $bg inset,0 0 0;

    &:not(.no-transition) {
      transition: background,box-shadow 0.2s ease-in-out;
    }

    &:checked {
      box-shadow: 1.5em 0 0 2px $bg inset,0 0 0 2px $bg inset,0 0 0;
      background: $mint;
    }

    &:disabled {
      cursor: not-allowed;
      background-color: lighten($toggle-bg, 20%);
      border-color: lighten($toggle-bg, 20%);
    }
  }
}

@import './modules/effects';


// pre, code

// Using some important tags to override prism
pre {
	overflow: auto;
	position: relative;
	background: $bg-alt !important;
	padding: 0.75rem !important;
  margin: 2rem 0.5rem !important;
	border: none;
	border-left: .25rem solid $pre-border;
	border-radius: $border-radius;

  &.line-numbers {
    padding-left: 3.8em !important;
  }
}

code, sub, sup {
	line-height: 0;
	position: relative;
	vertical-align: baseline;
}

code {
	background: $bg-alt !important;
  border: 1px solid darken($bg-alt, 10%);
	border-radius: $border-radius;
	padding: 0 4px;
  font-size: 0.85em;

  pre & {
    background: transparent;
    border: none;
    padding: 0;
    font-size: inherit;
  }

  // other prism improvements
  .token.variable, .token.important, .token.regex, .token.property {
    color: #83684C;
  }
  .token.keyword, .token.selector {
    color: #968955;
    font-weight: bold;
  }
  .token.string {
    color: #8B887D;
    font-style: italic;
  }
  .token.tag, .token.attr-name {
    color: #8B887D;
  }
  .token.function {
    color: #AB7146;
  }
  .token.builtin {
    color: #4B788D;
  }
  .token.attr-value {
    color: inherit;
  }
  .token.number {
    color: $fg;
  }
  .token.boolean, .token.class-name, .token.constant {
    color: #718388;
    font-weight: bold;
  }
  .token.doctype, .token.doctype * {
    color: silver;
  }
}

html code[class*="language-"], html pre[class*="language-"] {
  color: $fg;
  font-family: $font-mono;
  text-shadow: none;
  -moz-tab-size: 2;
  -o-tab-size: 2;
  tab-size: 2;
}

code[class*="language-"] {
  font-size: 0.85em;

  pre & {
    font-size: 1em;
  }
}

div.code-toolbar > .toolbar {
  right: 1em;
}

.language-css .token.string, .style .token.string, .token.entity, .token.operator, .token.url {
  background: none;
}


// page specifics

div.stats {
  margin: 2.7rem 0;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  align-items: center;
  flex-wrap: wrap;

  img {
    max-width: 90vw;
  }
}

div.shield-links {
  margin: 2.7rem 0;

  img {border-radius: 0;}
  a::before {content:none;}
  a::after {content:none;}
}

div.sponsor {
  display: flex;
  justify-content: center;
}

div.split {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;

  @media (min-width: $main-width) {
    div.left {
      max-width: 59%;
    }

    div.right {
      max-width: 40%
    }
  }
}

div.dev-only {
  padding: 1rem;
  background: red;
  color: white;
}
