---
import Base from './Base.astro';

interface Props {
  title: string;
  description?: string;
  slug: string;
  publishedDate?: string;
  modifiedDate?: string;
  hasPrism?: boolean;
}

const {
  title,
  description = '',
  slug,
  publishedDate,
  modifiedDate,
  hasPrism = false,
} = Astro.props;

const ogUrl = `https://jmthornton.net/blog/p/${slug}`;
---

<Base
  title={`${title} | Blog | Jade Michael Thornton`}
  description={description}
  footerVariant="blog"
  fontStrategy="prefetch"
>
  <Fragment slot="head">
    <link type="text/plain" rel="author" href="https://jmthornton.net/humans.txt" />
    <meta name="google-site-verification" content="JUM1Dl9n9ic9xPMb03Nzf4NgW_-8PWZrJ4eJGC_PoYM" />
    <meta property="og:title" content={title} />
    <meta property="og:url" content={ogUrl} />
    <meta property="og:site_name" content="jmthornton.net/blog" />
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en_US" />
    <meta name="article:author" content="https://jmthornton.net/blog" />
    {publishedDate && <meta property="article:published_time" content={publishedDate} />}
    {modifiedDate && <meta property="article:modified_time" content={modifiedDate} />}
    {hasPrism && (
      <link href="/assets/vendor/prism.min.css" rel="stylesheet" media="(prefers-color-scheme: light)" />
      <link href="/assets/vendor/prism-dark.min.css" rel="stylesheet" media="(prefers-color-scheme: dark)" />
    )}
    <slot name="extra-head" />
  </Fragment>

  <article class="post blog-content">
    <slot />
  </article>

  {hasPrism && (
    <Fragment slot="body-end">
      <script is:inline src="/assets/vendor/prism.js" defer></script>
    </Fragment>
  )}
</Base>
